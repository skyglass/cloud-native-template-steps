apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: customer-service
  namespace: default
spec:
  dependsOn:
    - name: kafka
  chart:
    spec:
      chart: customer-service
      sourceRef:
        kind: HelmRepository
        name: application
      version: {"$imagepolicy": "default:customer-service-image-policy:tag"}
  interval: 15s
  values:
    imageUpdateAutomation:
      enabled: true
      image: ghcr.io/skyglass/cloud-native-template-steps/charts/customer-service
      policy:
        semver:
          range: ">0.1.0-BUILD <0.2.0-BUILD"
